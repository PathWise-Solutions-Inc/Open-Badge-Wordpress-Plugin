if(typeof wp.blockEditor<"u"){const{registerBlockType:u,getBlockType:w}=wp.blocks,{__:a}=wp.i18n,{useState:d,useEffect:R}=wp.element,E=wp.apiFetch,{InspectorControls:y}=wp.blockEditor,{PanelBody:f,ToggleControl:h,SelectControl:k,RangeControl:v,Placeholder:N,Spinner:B,TextControl:b}=wp.components;w("pbc/badges-block")||u("pbc/badges-block",{title:a("User Badges","pathwise-badge-connect"),icon:"awards",category:"widgets",attributes:{layout:{type:"string",default:"grid"},showBadgeName:{type:"boolean",default:!0},showBadgeImage:{type:"boolean",default:!0},columns:{type:"number",default:3},imageWidth:{type:"string",default:"100%"},imageMaxWidth:{type:"string",default:"450px"}},edit({attributes:C,setAttributes:n}){const{layout:c,showBadgeName:s,showBadgeImage:o,columns:m,imageWidth:g,imageMaxWidth:r}=C,[t,i]=d(null),[W,p]=d(!0);return R(()=>{E({path:"/pathwise-badge-connect/v1/user-badges"}).then(e=>{e&&e.badges?i(e.badges):i([]),p(!1)}).catch(e=>{console.error("Error fetching badges:",e),i([]),p(!1)})},[]),W?React.createElement(N,null,React.createElement(B,null)):React.createElement(React.Fragment,null,React.createElement(y,null,React.createElement(f,{title:a("Display Settings","pathwise-badge-connect")},React.createElement(k,{label:a("Layout","pathwise-badge-connect"),value:c,options:[{label:"Grid",value:"grid"},{label:"Table",value:"table"},{label:"List",value:"list"}],onChange:e=>n({layout:e})}),React.createElement(h,{label:a("Show Badge Name","pathwise-badge-connect"),checked:s,onChange:e=>n({showBadgeName:e})}),React.createElement(h,{label:a("Show Badge Image","pathwise-badge-connect"),checked:o,onChange:e=>n({showBadgeImage:e})}),(c==="grid"||c==="table")&&React.createElement(v,{label:a("Columns","pathwise-badge-connect"),value:m,onChange:e=>n({columns:e}),min:1,max:5}),o&&React.createElement(React.Fragment,null,React.createElement(b,{label:a("Image Width","pathwise-badge-connect"),value:g,onChange:e=>n({imageWidth:e}),help:a("Set the width of the badge image (e.g., 100%, 200px).")}),React.createElement(b,{label:a("Image Max Width","pathwise-badge-connect"),value:r,onChange:e=>n({imageMaxWidth:e}),help:a("Set the maximum width of the badge image (e.g., 450px).")})))),c==="grid"&&React.createElement("div",{className:"pbc-badges-block grid",style:{"--columns":m}},t&&t.length>0?t.map(e=>React.createElement("div",{className:"badge-item",key:e.id},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:g,maxWidth:r}}),s&&React.createElement("span",null,e.name))):React.createElement("p",null,a("No badges available.","pathwise-badge-connect"))),c==="table"&&React.createElement("table",{className:"pbc-badges-block table",style:{"--columns":m}},React.createElement("tbody",null,t&&t.length>0?t.map((e,l)=>{const x=l%m===0,S=(l+1)%m===0||l===t.length-1;return React.createElement(React.Fragment,null,x&&React.createElement("tr",{key:`row-start-${l}`}),React.createElement("td",{className:"badge-item",key:l},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:g,maxWidth:r}}),s&&React.createElement("span",null,e.name)),S&&React.createElement("tr",{key:`row-end-${l}`}))}):React.createElement("tr",null,React.createElement("td",null,a("No badges available.","pathwise-badge-connect"))))),c==="list"&&React.createElement("ul",{className:"pbc-badges-block list"},t&&t.length>0?t.map((e,l)=>React.createElement("li",{className:"badge-item",key:l},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:g,maxWidth:r}}),s&&React.createElement("span",null,e.name))):React.createElement("li",null,a("No badges available.","pathwise-badge-connect"))))},save(){return null}})}
