if(typeof wp.blockEditor<"u"){const{registerBlockType:R,getBlockType:p}=wp.blocks,{__:a}=wp.i18n,{useState:d,useEffect:f}=wp.element,E=wp.apiFetch,{InspectorControls:w}=wp.blockEditor,{PanelBody:y,ToggleControl:b,SelectControl:k,RangeControl:v,Placeholder:N,Spinner:B,TextControl:h}=wp.components;p("obf/badges-block")||R("obf/badges-block",{title:a("User Badges","obf"),icon:"awards",category:"widgets",attributes:{layout:{type:"string",default:"grid"},showBadgeName:{type:"boolean",default:!0},showBadgeImage:{type:"boolean",default:!0},columns:{type:"number",default:3},imageWidth:{type:"string",default:"100%"},imageMaxWidth:{type:"string",default:"450px"}},edit({attributes:C,setAttributes:n}){const{layout:c,showBadgeName:r,showBadgeImage:o,columns:m,imageWidth:s,imageMaxWidth:g}=C,[t,i]=d(null),[W,u]=d(!0);return f(()=>{E({path:"/obf-pws/v1/user-badges"}).then(e=>{e&&e.badges?i(e.badges):i([]),u(!1)}).catch(e=>{console.error("Error fetching badges:",e),i([]),u(!1)})},[]),W?React.createElement(N,null,React.createElement(B,null)):React.createElement(React.Fragment,null,React.createElement(w,null,React.createElement(y,{title:a("Display Settings","obf")},React.createElement(k,{label:a("Layout","obf"),value:c,options:[{label:"Grid",value:"grid"},{label:"Table",value:"table"},{label:"List",value:"list"}],onChange:e=>n({layout:e})}),React.createElement(b,{label:a("Show Badge Name","obf"),checked:r,onChange:e=>n({showBadgeName:e})}),React.createElement(b,{label:a("Show Badge Image","obf"),checked:o,onChange:e=>n({showBadgeImage:e})}),(c==="grid"||c==="table")&&React.createElement(v,{label:a("Columns","obf"),value:m,onChange:e=>n({columns:e}),min:1,max:5}),o&&React.createElement(React.Fragment,null,React.createElement(h,{label:a("Image Width","obf"),value:s,onChange:e=>n({imageWidth:e}),help:a("Set the width of the badge image (e.g., 100%, 200px).")}),React.createElement(h,{label:a("Image Max Width","obf"),value:g,onChange:e=>n({imageMaxWidth:e}),help:a("Set the maximum width of the badge image (e.g., 450px).")})))),c==="grid"&&React.createElement("div",{className:"obf-badges-block grid",style:{"--columns":m}},t&&t.length>0?t.map(e=>React.createElement("div",{className:"badge-item",key:e.id},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:s,maxWidth:g}}),r&&React.createElement("span",null,e.name))):React.createElement("p",null,a("No badges available.","obf"))),c==="table"&&React.createElement("table",{className:"obf-badges-block table",style:{"--columns":m}},React.createElement("tbody",null,t&&t.length>0?t.map((e,l)=>{const x=l%m===0,S=(l+1)%m===0||l===t.length-1;return React.createElement(React.Fragment,null,x&&React.createElement("tr",{key:`row-start-${l}`}),React.createElement("td",{className:"badge-item",key:l},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:s,maxWidth:g}}),r&&React.createElement("span",null,e.name)),S&&React.createElement("tr",{key:`row-end-${l}`}))}):React.createElement("tr",null,React.createElement("td",null,a("No badges available.","obf"))))),c==="list"&&React.createElement("ul",{className:"obf-badges-block list"},t&&t.length>0?t.map((e,l)=>React.createElement("li",{className:"badge-item",key:l},o&&React.createElement("img",{src:e.image,alt:e.name,style:{width:s,maxWidth:g}}),r&&React.createElement("span",null,e.name))):React.createElement("li",null,a("No badges available.","obf"))))},save(){return null}})}
